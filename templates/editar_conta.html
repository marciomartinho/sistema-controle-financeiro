{% extends 'base.html' %}

{% block content %}
<h2>Editar Conta: {{ conta.nome }}</h2>
<hr>
<div class="card bg-light">
    <div class="card-body">
        <form method="POST" action="{{ url_for('contas_bp.editar_conta', id=conta.id) }}" enctype="multipart/form-data">
            <div class="row">
                <div class="col-md-6 mb-3"><label for="nome" class="form-label">Nome da Conta</label><input type="text" class="form-control" id="nome" name="nome" value="{{ conta.nome }}" required></div>
                <div class="col-md-6 mb-3"><label for="saldo_inicial" class="form-label">Saldo Inicial (R$)</label><input type="number" step="0.01" class="form-control" id="saldo_inicial" name="saldo_inicial" value="{{ conta.saldo_inicial }}" required></div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3"><label for="tipo_conta" class="form-label">Tipo de Conta</label><select class="form-select" id="tipo_conta" name="tipo_conta" onchange="toggleInvestimento()"><option value="Corrente" {% if conta.tipo_conta == 'Corrente' %}selected{% endif %}>Conta Corrente</option><option value="Investimento" {% if conta.tipo_conta == 'Investimento' %}selected{% endif %}>Investimento</option></select></div>
                <div class="col-md-4 mb-3" id="campo_tipo_investimento" style="display: {% if conta.tipo_conta == 'Investimento' %}block{% else %}none{% endif %};"><label for="tipo_investimento" class="form-label">Tipo de Investimento</label><input type="text" class="form-control" id="tipo_investimento" name="tipo_investimento" value="{{ conta.tipo_investimento or '' }}" placeholder="Ex: CDB, Ações..."></div>
                <div class="col-md-4 mb-3"><label for="logo_imagem" class="form-label">Alterar Logo (opcional)</label><input class="form-control" type="file" id="logo_imagem" name="logo_imagem">{% if conta.logo_imagem %}<small class="text-muted">Logo atual: {{ conta.logo_imagem }}</small>{% endif %}</div>
            </div>
            <button type="submit" class="btn btn-primary">Salvar Alterações</button>
            <a href="{{ url_for('contas_bp.gerenciar_contas') }}" class="btn btn-secondary">Cancelar</a>
        </form>
    </div>
</div>
<script>
    function toggleInvestimento() {
        var tipoConta = document.getElementById('tipo_conta').value;
        var campoInvestimento = document.getElementById('campo_tipo_investimento');
        if (tipoConta === 'Investimento') {
            campoInvestimento.style.display = 'block';
        } else {
            document.getElementById('tipo_investimento').value = '';
            campoInvestimento.style.display = 'none';
        }
    }
</script>
{% endblock %}